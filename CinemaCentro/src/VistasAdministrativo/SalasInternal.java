/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package VistasAdministrativo;

import Controlador.AsientoDAO;
import Controlador.SalaDAO;
import Modelo.Sala;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import static javax.swing.JOptionPane.YES_NO_OPTION;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Enzo_2
 */
public class SalasInternal extends javax.swing.JInternalFrame {

    /**
     * Creates new form SalasInternal
     */
    SalaDAO maniSalas = new SalaDAO();
    AsientoDAO maniAsi = new AsientoDAO();
    private int nro_sala = -1;
    public SalasInternal() {
        initComponents();
        rellenarCabeceras();
        deshabilitarBotones();
        rellenarTabla();
        agregarListenerTablaSala(tblSalas);
        txtEstado.setEnabled(false);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        pnlSalas = new javax.swing.JPanel();
        lblNumero = new javax.swing.JLabel();
        lblCapacidad = new javax.swing.JLabel();
        lblEstado = new javax.swing.JLabel();
        lblApta3D = new javax.swing.JLabel();
        txtNumero = new javax.swing.JTextField();
        txtCapacidad = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblSalas = new javax.swing.JTable();
        btnAgregar = new javax.swing.JButton();
        checkEdicion = new javax.swing.JCheckBox();
        btnEliminar = new javax.swing.JButton();
        btnModificar = new javax.swing.JButton();
        checkApta3D = new javax.swing.JCheckBox();
        btnAlta = new javax.swing.JButton();
        btnBaja = new javax.swing.JButton();
        btnSalir = new javax.swing.JButton();
        lblSalasActuales = new javax.swing.JLabel();
        txtEstado = new javax.swing.JTextField();
        btnLiberarAsientos = new javax.swing.JButton();
        lblCinemaCentro = new javax.swing.JLabel();
        lblTitulo = new javax.swing.JLabel();

        pnlSalas.setBackground(new java.awt.Color(102, 0, 0));

        lblNumero.setFont(new java.awt.Font("Roboto Black", 1, 14)); // NOI18N
        lblNumero.setForeground(new java.awt.Color(255, 255, 255));
        lblNumero.setText("Número de sala:");

        lblCapacidad.setFont(new java.awt.Font("Roboto Black", 1, 14)); // NOI18N
        lblCapacidad.setForeground(new java.awt.Color(255, 255, 255));
        lblCapacidad.setText("Capacidad de sala:");

        lblEstado.setFont(new java.awt.Font("Roboto Black", 1, 14)); // NOI18N
        lblEstado.setForeground(new java.awt.Color(255, 255, 255));
        lblEstado.setText("Estado:");

        lblApta3D.setFont(new java.awt.Font("Roboto Black", 1, 14)); // NOI18N
        lblApta3D.setForeground(new java.awt.Color(255, 255, 255));
        lblApta3D.setText("Apta 3D:");

        txtCapacidad.setToolTipText("Minimo: 170 - Maximo: 230");

        tblSalas.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {},
                {},
                {},
                {}
            },
            new String [] {

            }
        ));
        jScrollPane1.setViewportView(tblSalas);

        btnAgregar.setBackground(new java.awt.Color(70, 73, 75));
        btnAgregar.setFont(new java.awt.Font("Roboto Black", 1, 12)); // NOI18N
        btnAgregar.setForeground(new java.awt.Color(255, 255, 255));
        btnAgregar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/agregar.png"))); // NOI18N
        btnAgregar.setText("Agregar");
        btnAgregar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAgregarActionPerformed(evt);
            }
        });

        checkEdicion.setFont(new java.awt.Font("Roboto Black", 1, 12)); // NOI18N
        checkEdicion.setForeground(new java.awt.Color(255, 255, 255));
        checkEdicion.setText("Habilitar modificación");
        checkEdicion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                checkEdicionActionPerformed(evt);
            }
        });

        btnEliminar.setBackground(new java.awt.Color(70, 73, 75));
        btnEliminar.setFont(new java.awt.Font("Roboto Black", 1, 12)); // NOI18N
        btnEliminar.setForeground(new java.awt.Color(255, 255, 255));
        btnEliminar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/eliminar.png"))); // NOI18N
        btnEliminar.setText("Eliminar");
        btnEliminar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEliminarActionPerformed(evt);
            }
        });

        btnModificar.setBackground(new java.awt.Color(70, 73, 75));
        btnModificar.setFont(new java.awt.Font("Roboto Black", 1, 12)); // NOI18N
        btnModificar.setForeground(new java.awt.Color(255, 255, 255));
        btnModificar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/modificar.png"))); // NOI18N
        btnModificar.setText("Modificar");
        btnModificar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnModificarActionPerformed(evt);
            }
        });

        checkApta3D.setFont(new java.awt.Font("Roboto Black", 1, 12)); // NOI18N
        checkApta3D.setForeground(new java.awt.Color(255, 255, 255));
        checkApta3D.setText("SI/NO");

        btnAlta.setBackground(new java.awt.Color(70, 73, 75));
        btnAlta.setFont(new java.awt.Font("Roboto Black", 1, 12)); // NOI18N
        btnAlta.setForeground(new java.awt.Color(255, 255, 255));
        btnAlta.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/dar-alta.png"))); // NOI18N
        btnAlta.setText("Dar de Alta");
        btnAlta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAltaActionPerformed(evt);
            }
        });

        btnBaja.setBackground(new java.awt.Color(70, 73, 75));
        btnBaja.setFont(new java.awt.Font("Roboto Black", 1, 12)); // NOI18N
        btnBaja.setForeground(new java.awt.Color(255, 255, 255));
        btnBaja.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/dar-baja.png"))); // NOI18N
        btnBaja.setText("Dar de Baja");
        btnBaja.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBajaActionPerformed(evt);
            }
        });

        btnSalir.setBackground(new java.awt.Color(70, 73, 75));
        btnSalir.setFont(new java.awt.Font("Roboto Black", 1, 12)); // NOI18N
        btnSalir.setForeground(new java.awt.Color(255, 255, 255));
        btnSalir.setText("Salir");
        btnSalir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSalirActionPerformed(evt);
            }
        });

        lblSalasActuales.setFont(new java.awt.Font("Roboto Black", 1, 14)); // NOI18N
        lblSalasActuales.setForeground(new java.awt.Color(255, 255, 255));
        lblSalasActuales.setText("Salas actuales:");

        btnLiberarAsientos.setBackground(new java.awt.Color(70, 73, 75));
        btnLiberarAsientos.setFont(new java.awt.Font("Roboto Black", 1, 12)); // NOI18N
        btnLiberarAsientos.setForeground(new java.awt.Color(255, 255, 255));
        btnLiberarAsientos.setText("Liberar asientos");
        btnLiberarAsientos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLiberarAsientosActionPerformed(evt);
            }
        });

        lblCinemaCentro.setFont(new java.awt.Font("Roboto Black", 1, 36)); // NOI18N
        lblCinemaCentro.setForeground(new java.awt.Color(255, 255, 255));
        lblCinemaCentro.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblCinemaCentro.setText("CinemaCentro");

        lblTitulo.setFont(new java.awt.Font("Roboto Black", 0, 24)); // NOI18N
        lblTitulo.setForeground(new java.awt.Color(255, 255, 255));
        lblTitulo.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblTitulo.setText("GESTION DE SALAS");
        lblTitulo.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);

        javax.swing.GroupLayout pnlSalasLayout = new javax.swing.GroupLayout(pnlSalas);
        pnlSalas.setLayout(pnlSalasLayout);
        pnlSalasLayout.setHorizontalGroup(
            pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlSalasLayout.createSequentialGroup()
                .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnlSalasLayout.createSequentialGroup()
                        .addGap(19, 19, 19)
                        .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(pnlSalasLayout.createSequentialGroup()
                                .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(btnAgregar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(btnEliminar, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(btnBaja, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(btnAlta, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addGroup(pnlSalasLayout.createSequentialGroup()
                                .addGap(35, 35, 35)
                                .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(pnlSalasLayout.createSequentialGroup()
                                        .addGap(21, 21, 21)
                                        .addComponent(btnModificar, javax.swing.GroupLayout.PREFERRED_SIZE, 110, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                        .addComponent(checkEdicion)
                                        .addGroup(pnlSalasLayout.createSequentialGroup()
                                            .addComponent(lblApta3D)
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                            .addComponent(checkApta3D)))))
                            .addGroup(pnlSalasLayout.createSequentialGroup()
                                .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(lblNumero)
                                    .addComponent(lblCapacidad)
                                    .addComponent(lblEstado))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addComponent(txtNumero, javax.swing.GroupLayout.DEFAULT_SIZE, 73, Short.MAX_VALUE)
                                    .addComponent(txtCapacidad, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(txtEstado, javax.swing.GroupLayout.Alignment.LEADING))))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(pnlSalasLayout.createSequentialGroup()
                                .addComponent(lblSalasActuales)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(lblCinemaCentro))
                            .addGroup(pnlSalasLayout.createSequentialGroup()
                                .addComponent(btnLiberarAsientos, javax.swing.GroupLayout.PREFERRED_SIZE, 130, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(btnSalir, javax.swing.GroupLayout.PREFERRED_SIZE, 69, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(jScrollPane1)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlSalasLayout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(lblTitulo, javax.swing.GroupLayout.PREFERRED_SIZE, 742, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        pnlSalasLayout.setVerticalGroup(
            pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlSalasLayout.createSequentialGroup()
                .addGap(12, 12, 12)
                .addComponent(lblTitulo)
                .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnlSalasLayout.createSequentialGroup()
                        .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblSalasActuales)
                            .addComponent(lblCinemaCentro))
                        .addGap(5, 5, 5)
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 255, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(btnLiberarAsientos)
                            .addComponent(btnSalir))
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(pnlSalasLayout.createSequentialGroup()
                        .addGap(65, 65, 65)
                        .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblNumero)
                            .addComponent(txtNumero, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblCapacidad)
                            .addComponent(txtCapacidad, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblEstado)
                            .addComponent(txtEstado, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblApta3D)
                            .addComponent(checkApta3D))
                        .addGap(13, 13, 13)
                        .addComponent(checkEdicion)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(btnModificar)
                        .addGap(18, 18, 18)
                        .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(btnAlta)
                            .addComponent(btnAgregar, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(pnlSalasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(btnBaja)
                            .addComponent(btnEliminar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addGap(82, 82, 82))))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnlSalas, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnlSalas, javax.swing.GroupLayout.PREFERRED_SIZE, 457, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void checkEdicionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_checkEdicionActionPerformed
        if (checkEdicion.isSelected()) {
            habilitarBotones();
            btnAgregar.setEnabled(false);
        btnEliminar.setEnabled(false);
        btnLiberarAsientos.setEnabled(false);
        btnAlta.setEnabled(false);
        btnBaja.setEnabled(false);
        } else {
            deshabilitarBotones();
        }
    }//GEN-LAST:event_checkEdicionActionPerformed

    private void btnSalirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSalirActionPerformed
        this.dispose();
    }//GEN-LAST:event_btnSalirActionPerformed

    private void btnEliminarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEliminarActionPerformed
        try {
            int seleccion = JOptionPane.showConfirmDialog(this, "¿Desea eliminar la sala seleccionada? Esta acción eliminara todos los asientos"
                    + " relacionados a esta sala.", "Confirmación", YES_NO_OPTION);
            if(seleccion == 0){
                maniSalas.eliminarSala(nro_sala);
                JOptionPane.showMessageDialog(this, "Eliminado correctamente");
            }
            
        } catch(Exception e){
            JOptionPane.showMessageDialog(this, e.getMessage(), "Error", WIDTH);
        } finally {
            rellenarTabla();
        }
    }//GEN-LAST:event_btnEliminarActionPerformed

    private void btnAltaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAltaActionPerformed
        try {
            maniSalas.darAltaSala(nro_sala);
        } catch(Exception e){
            JOptionPane.showMessageDialog(this, e.getMessage(), "Error", WIDTH);
        } finally {
            rellenarTabla();
        }
    }//GEN-LAST:event_btnAltaActionPerformed

    private void btnBajaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBajaActionPerformed
        try {
            maniSalas.darBajaSala(nro_sala);
        } catch(Exception e){
            JOptionPane.showMessageDialog(this, e.getMessage(), "Error", WIDTH);
        } finally {
            rellenarTabla();
        }
    }//GEN-LAST:event_btnBajaActionPerformed

    private void btnModificarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnModificarActionPerformed
        String txtNum = txtNumero.getText();
        String txtCap = txtCapacidad.getText();
        boolean es3d = checkApta3D.isSelected();
        boolean estado = parsearString(txtEstado.getText());
        try {
            int numeroSala = Integer.parseInt(txtNum);
            int capacidad = Integer.parseInt(txtCap);
            if(capacidad < 170 || capacidad > 230){
                JOptionPane.showMessageDialog(this, "Ingrese entre los valores validos la capacidad.");
                return;
            }
            Sala salaNueva = new Sala(numeroSala, capacidad, estado, es3d);
            maniSalas.actualizarSala(nro_sala, salaNueva);
        } catch (NumberFormatException a){
            JOptionPane.showMessageDialog(this, "Ingrese un número valido");
        } 
        
        catch(Exception e){
            JOptionPane.showMessageDialog(this, e.getMessage(), "Error", WIDTH);
        } 
        
        finally {
            rellenarTabla();
        }
    }//GEN-LAST:event_btnModificarActionPerformed

    private void btnAgregarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAgregarActionPerformed
        JFrame padre = (JFrame) SwingUtilities.getWindowAncestor(this);
        DialogCrearSala ventanaCrearSala = new DialogCrearSala(padre, true);
        ventanaCrearSala.setVisible(true);
        ventanaCrearSala.setLocationRelativeTo(padre);
        rellenarTabla();
    }//GEN-LAST:event_btnAgregarActionPerformed

    private void btnLiberarAsientosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnLiberarAsientosActionPerformed
        // TODO add your handling code here:
        try{
            maniAsi.liberarAsientosPorSala(nro_sala);
        } catch(Exception e){
            JOptionPane.showMessageDialog(this, e.getMessage());
        } finally {
            rellenarTabla();
        }
    }//GEN-LAST:event_btnLiberarAsientosActionPerformed

    public void rellenarCabeceras() {
        DefaultTableModel modelo = new DefaultTableModel() {
            @Override
            public boolean isCellEditable(int row, int column) {
                return false;
            }
        };
        modelo.addColumn("Numero sala");
        modelo.addColumn("Capacidad");
        modelo.addColumn("Asientos libres");
        modelo.addColumn("Estado");
        modelo.addColumn("Apta 3D");
        tblSalas.setModel(modelo);
    }

    public void rellenarTabla() {
        try {
            DefaultTableModel modelo = (DefaultTableModel) tblSalas.getModel();
            modelo.setRowCount(0);
            List<Sala> listaSalas = maniSalas.listarsalas();
            for (Sala s : listaSalas) {
                modelo.addRow(new Object[] {s.getNro_Sala(), 
                    s.getCapacidad(),
                    maniAsi.cantidadAsientosLibres(s.getNro_Sala()),
                    parsearBoolean(s.isEstado()),
                    parsearBoolean(s.isApta3D()),
                    
                });
            }
        } catch (Exception e) {

        }

    }

    public String parsearBoolean(boolean estado){
        if(estado){
            return "Activo";
        } 
            return "Inactivo";
    } 
    
    public boolean parsearString(String estado){
        return estado.equalsIgnoreCase("Activo");
    }
    
    public void deshabilitarBotones() {
        txtNumero.setEnabled(false);
        txtCapacidad.setEnabled(false);
        checkApta3D.setEnabled(false);
        btnAgregar.setEnabled(true);
        btnEliminar.setEnabled(true);
        btnLiberarAsientos.setEnabled(true);
        btnAlta.setEnabled(true);
        btnBaja.setEnabled(true);
    }

    public void habilitarBotones() {
        txtNumero.setEnabled(true);
        txtCapacidad.setEnabled(true);
        checkApta3D.setEnabled(true);
        btnAgregar.setEnabled(false);
        btnEliminar.setEnabled(false);
        btnLiberarAsientos.setEnabled(false);
        btnAlta.setEnabled(false);
        btnBaja.setEnabled(false);
    }
    
    public void agregarListenerTablaSala(JTable tabla){
        tblSalas.getSelectionModel().addListSelectionListener(new ListSelectionListener(){
            @Override
            public void valueChanged(ListSelectionEvent evento){
                if(evento.getValueIsAdjusting()){
                    return;
                }
                
                int filaS =  tabla.getSelectedRow();
                if(filaS != -1){
                    nro_sala = (int) tabla.getValueAt(filaS, 0);
                    txtNumero.setText(Integer.toString((int) tabla.getValueAt(filaS, 0)));
                    txtCapacidad.setText(Integer.toString((int) tabla.getValueAt(filaS, 1)));
                    txtEstado.setText((String) tabla.getValueAt(filaS, 3));
                    if(parsearString((String)tabla.getValueAt(filaS, 4))){
                        checkApta3D.setSelected(true);
                    } else {
                        checkApta3D.setSelected(false);
                    }
                }
            }
        });
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnAgregar;
    private javax.swing.JButton btnAlta;
    private javax.swing.JButton btnBaja;
    private javax.swing.JButton btnEliminar;
    private javax.swing.JButton btnLiberarAsientos;
    private javax.swing.JButton btnModificar;
    private javax.swing.JButton btnSalir;
    private javax.swing.JCheckBox checkApta3D;
    private javax.swing.JCheckBox checkEdicion;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JLabel lblApta3D;
    private javax.swing.JLabel lblCapacidad;
    private javax.swing.JLabel lblCinemaCentro;
    private javax.swing.JLabel lblEstado;
    private javax.swing.JLabel lblNumero;
    private javax.swing.JLabel lblSalasActuales;
    private javax.swing.JLabel lblTitulo;
    private javax.swing.JPanel pnlSalas;
    private javax.swing.JTable tblSalas;
    private javax.swing.JTextField txtCapacidad;
    private javax.swing.JTextField txtEstado;
    private javax.swing.JTextField txtNumero;
    // End of variables declaration//GEN-END:variables
}
